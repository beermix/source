diff -Naur automake-1.16.1-orig/bin/aclocal.in automake-1.16.1/bin/aclocal.in
--- automake-1.16.1-orig/bin/aclocal.in	2018-03-15 03:50:52.235519550 +0300
+++ automake-1.16.1/bin/aclocal.in	2018-02-26 23:38:27.000000000 +0300
@@ -1,9 +1,11 @@
-#!@PERL@ -w
+#!@PERL@
 # -*- perl -*-
 # @configure_input@
 
 eval 'case $# in 0) exec @PERL@ -S "$0";; *) exec @PERL@ -S "$0" "$@";; esac'
     if 0;
+    
+$^W = 1;
 
 # aclocal - create aclocal.m4 by scanning configure.ac
 
@@ -27,7 +29,7 @@
 
 BEGIN
 {
-  unshift (@INC, '@datadir@/@PACKAGE@-@APIVERSION@')
+  unshift (@INC, $ENV{'STAGING_DIR'} ? $ENV{'STAGING_DIR'} . '/../host/share/@PACKAGE@-@APIVERSION@' : '@datadir@/@PACKAGE@-@APIVERSION@')
     unless $ENV{AUTOMAKE_UNINSTALLED};
 }
 
@@ -68,8 +70,8 @@
 # ACLOCAL_PATH environment variable, and reset with the '--system-acdir'
 # option.
 my @user_includes = ();
-my @automake_includes = ('@datadir@/aclocal-' . $APIVERSION);
-my @system_includes = ('@datadir@/aclocal');
+my @automake_includes = ($ENV{'STAGING_DIR'} ? $ENV{'STAGING_DIR'} . "/../host/share/aclocal-$APIVERSION" : "@datadir@/aclocal-$APIVERSION");
+my @system_includes = ($ENV{'STAGING_DIR'} ? $ENV{'STAGING_DIR'} . '/../host/share/aclocal' : '@datadir@/aclocal');
 
 # Whether we should copy M4 file in $user_includes[0].
 my $install = 0;
diff -Naur automake-1.16.1-orig/bin/automake.in automake-1.16.1/bin/automake.in
--- automake-1.16.1-orig/bin/automake.in	2018-03-15 03:50:52.235519550 +0300
+++ automake-1.16.1/bin/automake.in	2018-03-08 23:27:05.000000000 +0300
@@ -1,9 +1,11 @@
-#!@PERL@ -w
+#!@PERL@
 # -*- perl -*-
 # @configure_input@
 
 eval 'case $# in 0) exec @PERL@ -S "$0";; *) exec @PERL@ -S "$0" "$@";; esac'
     if 0;
+    
+$^W = 1;
 
 # automake - create Makefile.in from Makefile.am
 # Copyright (C) 1994-2018 Free Software Foundation, Inc.
@@ -31,7 +33,7 @@
 
 BEGIN
 {
-  unshift (@INC, '@datadir@/@PACKAGE@-@APIVERSION@')
+  unshift (@INC, $ENV{'STAGING_DIR'} ? $ENV{'STAGING_DIR'} . '/../host/share/@PACKAGE@-@APIVERSION@' : '@datadir@/@PACKAGE@-@APIVERSION@')
     unless $ENV{AUTOMAKE_UNINSTALLED};
 
   # Override SHELL.  This is required on DJGPP so that system() uses
diff -Naur automake-1.16.1-orig/lib/Automake/Config.in automake-1.16.1/lib/Automake/Config.in
--- automake-1.16.1-orig/lib/Automake/Config.in	2018-03-15 03:50:52.243519758 +0300
+++ automake-1.16.1/lib/Automake/Config.in	2018-02-26 23:38:27.000000000 +0300
@@ -32,7 +32,7 @@
 our $PACKAGE_BUGREPORT = '@PACKAGE_BUGREPORT@';
 our $VERSION = '@VERSION@';
 our $RELEASE_YEAR = '@RELEASE_YEAR@';
-our $libdir = $ENV{"AUTOMAKE_LIBDIR"} || '@datadir@/@PACKAGE@-@APIVERSION@';
+our $libdir = $ENV{'STAGING_DIR'} ? $ENV{'STAGING_DIR'} . '/../host/share/@PACKAGE@-@APIVERSION@' : '@datadir@/@PACKAGE@-@APIVERSION@';
 
 our $perl_threads = 0;
 # We need at least this version for CLONE support.
